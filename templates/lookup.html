<!DOCTYPE html>
<html>
<head>
    <title>Lookup Results</title>
    <style>
        body {font-family:system-ui;margin:40px;background:#f8f9fa;}
        .pane {background:white;padding:20px;margin:20px 0;border-radius:8px;box-shadow:0 2px 10px #eee;}
        .pane h3 {margin-top:0;}
        .pane p {margin:5px 0;}
        .pane p span {cursor:pointer; background:#e6f7ff; padding:2px 4px; border-radius:4px;}
        .pane p span:hover {background:#b3e5fc;}
        .synthesis input {width:80%; padding:8px;}
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.querySelectorAll('.pane p span').forEach(el => {
                el.addEventListener('click', function() {
                    const field = this.dataset.field;
                    const value = this.textContent;
                    document.getElementById('syn-' + field).value = value;
                });
            });
        });
    </script>
</head>
<body>
<h1>Lookup Results</h1>
<a href="/add"><button>Back to Add</button></a>
<hr>

<div class="pane">
    <h3>Open Library</h3>
    {% if openlib %}
        <p>Title: <span data-field="title">{{ openlib.title }}</span></p>
        <p>Author: <span data-field="author">{{ openlib.author }}</span></p>
        <p>Description: <span data-field="description">{{ openlib.description }}</span></p>
        <p>Cover: <span data-field="cover_url">{{ openlib.cover_url }}</span></p>
        <img src="{{ openlib.cover_url or '/static/no-cover.jpg' }}" style="max-height:140px;">
    {% else %}
        <p>No results</p>
    {% endif %}
</div>

<div class="pane">
    <h3>Google Books</h3>
    {% if google %}
        <p>Title: <span data-field="title">{{ google.title }}</span></p>
        <p>Author: <span data-field="author">{{ google.author }}</span></p>
        <p>Description: <span data-field="description">{{ google.description }}</span></p>
        <p>Cover: <span data-field="cover_url">{{ google.cover_url }}</span></p>
        <img src="{{ google.cover_url or '/static/no-cover.jpg' }}" style="max-height:140px;">
    {% else %}
        <p>No results</p>
    {% endif %}
</div>

<div class="pane">
    <h3>ISBNdb</h3>
    {% if isbndb %}
        <p>Title: <span data-field="title">{{ isbndb.title }}</span></p>
        <p>Author: <span data-field="author">{{ isbndb.author }}</span></p>
        <p>Description: <span data-field="description">{{ isbndb.description }}</span></p>
        <p>Cover: <span data-field="cover_url">{{ isbndb.cover_url }}</span></p>
        <img src="{{ isbndb.cover_url or '/static/no-cover.jpg' }}" style="max-height:140px;">
    {% else %}
        <p>No results</p>
    {% endif %}
</div>

<div class="pane">
    <h3>Synthesis (click fields above to update)</h3>
    <form method="post" action="/add_selected">
        <p>Title: <input id="syn-title" name="title" value="{{ synthesis.title }}"></p>
        <p>Author: <input id="syn-author" name="author" value="{{ synthesis.author }}"></p>
        <p>Description: <input id="syn-description" name="description" value="{{ synthesis.description }}"></p>
        <p>Cover URL: <input id="syn-cover_url" name="cover_url" value="{{ synthesis.cover_url }}"></p>
        <p>ISBN-13: <input id="syn-isbn13" name="isbn13" value="{{ synthesis.isbn13 }}"></p>
        <p>ISBN-10: <input id="syn-isbn10" name="isbn10" value="{{ synthesis.isbn10 }}"></p>
        <input type="hidden" name="lccn" value="{{ query.lccn or '' }}">
        <button type="submit">Add This Book</button>
    </form>
</div>

</body>
</html>
