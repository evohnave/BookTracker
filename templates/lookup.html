<!DOCTYPE html>
<html>
<head>
<head>
    <title>Lookup Results - BookTracker</title>
    <style>
        body {font-family:system-ui;margin:40px;background:#f8f9fa;}
        img {max-height:180px;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,0.15);}
        .result {background:white;padding:25px;margin:20px 0;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
        .source {color:#0066cc;font-weight:bold;margin-bottom:15px;}
        button {padding:10px 20px;font-size:16px;border-radius:6px;background:#0066cc;color:white;border:none;cursor:pointer;}
        a {text-decoration:none;}
    </style>
</head>
<body>
<h1>Lookup Results</h1>
<a href="/add">Back to Add</a>
<hr>

{% if results %}
    <p class="source">Found via: <strong>{{ source }}</strong></p>
    {% for book in results %}
        <div class="result">
            <img src="{{ book.cover_url or '/static/no-cover.jpg' }}" alt="Cover">
            <div style="margin-left:30px;">
                <h2>{{ book.title }}</h2>
                <p><strong>by</strong> {{ book.author }}</p>
                {% if book.isbn13 or book.isbn10 %}
                    <p><small>ISBN-13: {{ book.isbn13 or 'N/A' }} • ISBN-10: {{ book.isbn10 or 'N/A' }}</small></p>
                {% endif %}
                {% if book.description %}
                    <p><em>{{ book.description[:300] }}{% if book.description|length > 300 %}...{% endif %}</em></p>
                {% endif %}
                <form method="post" action="/add_selected" style="margin-top:15px;">
                    <input type="hidden" name="title" value="{{ book.title }}">
                    <input type="hidden" name="author" value="{{ book.author }}">
                    <input type="hidden" name="isbn13" value="{{ book.isbn13 or '' }}">
                    <input type="hidden" name="isbn10" value="{{ book.isbn10 or '' }}">
                    <input type="hidden" name="description" value="{{ book.description or '' }}">
                    <input type="hidden" name="cover_url" value="{{ book.cover_url or '' }}">
                    <input type="hidden" name="lccn" value="{{ query.lccn or '' }}">
                    <button type="submit">Add This Book</button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <p><strong>No book found</strong> — please add manually below or try a different ISBN.</p>
    <a href="/add"><button>Add Manually</button></a>
{% endif %}

</body>
</html>
